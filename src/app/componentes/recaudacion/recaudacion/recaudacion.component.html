<div class="content mt-3">
  <div class="container-fluid">
    <!-- Header Mejorado -->
    <div class="card shadow-sm border-0 mb-4">
      <div class="card-header bg-gradient-primary text-white py-3">
        <div class="row align-items-center">
          <div class="col-md-8">
            <div class="d-flex align-items-center">
              <i class="bi bi-cash-coin fa-2x mr-3"></i>
              <div>
                <h4 class="mb-0 font-weight-bold">Sistema de Recaudación v2.0</h4>
                <small class="opacity-8">
                  <span class="badge" [ngClass]="estadoCajaT ? 'badge-danger' : 'badge-success'">
                    <i class="fa" [ngClass]="estadoCajaT ? 'fa-lock' : 'fa-unlock'" aria-hidden="true"></i>
                    {{ estadoCajaT ? 'Caja Cerrada' : 'Caja Abierta' }}
                  </span>
                </small>
              </div>
            </div>
          </div>
          <div class="col-md-4 text-right">
            <div class="btn-group">
              <button type="button" class="btn btn-light btn-sm dropdown-toggle" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <i class="bi bi-menu-button-wide"></i> Opciones
              </button>
              <div class="dropdown-menu dropdown-menu-right shadow">
                <button class="dropdown-item" type="button" data-toggle="modal" (click)="abrirCaja()" data-target="#abrirCaja"
                  [disabled]="!estadoCajaT">
                  <i class="bi bi-door-open mr-2"></i>Abrir caja
                </button>
                <button class="dropdown-item" type="button" data-toggle="modal" data-target="#cerrarCaja"
                  [disabled]="estadoCajaT">
                  <i class="bi bi-door-closed mr-2"></i>Cerrar caja
                </button>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item" type="button" data-toggle="modal" data-target="#imprimir">
                  <i class="bi bi-printer mr-2"></i>Imprimir
                </button>
              </div>
            </div>

            <button *ngIf="swbusca != 0" class="btn btn-outline-light btn-sm ml-2" (click)="reiniciar()">
              <i class="bi bi-arrow-left-circle"></i> Volver
            </button>
          </div>
        </div>
      </div>

      <!-- Formulario de Búsqueda -->
      <div class="card-body bg-light py-3">
        <form [formGroup]="formBuscar" (ngSubmit)="onSubmit()">
          <div class="row align-items-end">
            <div class="col-md-3">
              <label class="form-label small text-muted mb-1">Número de Cuenta</label>
              <input class="form-control form-control-sm" type="text" formControlName="cuenta" placeholder="Ej: 123456"
                (focus)="formBuscar.get('identificacion')?.setValue('')" />
            </div>
            <div class="col-md-3">
              <label class="form-label small text-muted mb-1">Identificación</label>
              <input class="form-control form-control-sm" type="text" formControlName="identificacion"
                placeholder="Ej: 1723456789" (focus)="formBuscar.get('cuenta')?.setValue('')" />
            </div>
            <div class="col-md-4">
              <div class="d-flex align-items-end h-100">
                <div class="d-flex gap-2 align-items-center">
                  <button class="btn btn-primary btn-sm px-3" type="submit">
                    <i class="fa fa-search mr-1"></i>Buscar
                  </button>
                  <button type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal"
                    data-target="#clientesModal" (click)="clientesModal()">
                    <i class="bi bi-people mr-1"></i>Clientes
                  </button>
                  <div *ngIf="swvalido == 0" class="alert alert-warning py-1 px-2 mb-0 small">
                    <i class="fa fa-exclamation-triangle mr-1"></i>Datos inválidos
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-2" *ngIf="acobrar > 0 && !swcobrado && !estadoCajaT">
              <button type="button" class="btn btn-success btn-sm w-100" data-toggle="modal" data-target="#modalCobrar"
                (click)="valorAcobrar(acobrar)">
                <i class="bi bi-check-lg mr-1"></i>
                <span class="d-block small">Cobrar</span>
                <strong class="small">{{acobrar | number: '1.2-2'}}</strong>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Información del Cliente Compacta -->
    <div *ngIf="swbusca == 3" class="row mb-3">
      <div class="col-12">
        <div class="card shadow-sm border-0">
          <div class="card-body py-3">
            <div class="row align-items-center">
              <div class="col-md-8">
                <div class="d-flex align-items-center">
                  <div class="client-avatar mr-3">
                    <div class="avatar-circle-sm bg-primary text-white">
                      {{ cliente.nombre.charAt(0) }}
                    </div>
                  </div>
                  <div>
                    <h5 class="mb-1 text-primary">{{ cliente.nombre }}</h5>
                    <div class="d-flex flex-wrap gap-3">
                      <span class="text-muted small">
                        <i class="bi bi-person-badge mr-1"></i>
                        <strong>Identificación:</strong> {{ cliente.cedula }}
                      </span>
                      <span class="text-muted small" *ngIf="cliente.direccion">
                        <i class="bi bi-geo-alt mr-1"></i>
                        <strong>Dirección:</strong> {{ cliente.direccion }}
                      </span>
                      <span class="text-muted small" *ngIf="cliente.telefono">
                        <i class="bi bi-telephone mr-1"></i>
                        <strong>Teléfono:</strong> {{ cliente.telefono }}
                      </span>
                      <span class="text-muted small" *ngIf="formCobrar.value.saldo">
                        <i class="bi bi-credit-card mr-1"></i>
                        <strong>Nota Crédito:</strong> {{ formCobrar.value.saldo }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Panel de Resultados -->
    <div class="row">
      <div class="col-12">
        <div class="card shadow-sm border-0">
          <div class="card-body p-0">
            <!-- Estados de la aplicación -->
            <div *ngIf="swbusca == 0" class="text-center py-5">
              <div class="empty-state">
                <img src="/assets/dist/img/logo.png" alt="Logo" class="empty-state-img mb-4" style="max-width: 250px;">
                <h5 class="text-muted">Sistema de Recaudación</h5>
                <p class="text-muted small">Utilice el formulario de búsqueda para comenzar</p>
              </div>
            </div>

            <div *ngIf="swbusca == 1" class="text-center py-4">
              <div class="alert alert-info border-0 m-3 py-3">
                <div class="d-flex align-items-center justify-content-center">
                  <i class="fas fa-info-circle fa-lg mr-2"></i>
                  <div>
                    <h6 class="alert-heading mb-1">Información</h6>
                    <p class="mb-0 small">
                      No existe la <strong>{{ mensaje.campo }}</strong> {{ mensaje.texto }}
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="swbusca == 2" class="text-center py-4">
              <div class="alert alert-info border-0 m-3 py-3">
                <div class="d-flex align-items-center justify-content-center">
                  <i class="fas fa-info-circle fa-lg mr-2"></i>
                  <div>
                    <h6 class="alert-heading mb-1">Información</h6>
                    <p class="mb-0 small">
                      No tiene Planillas sin Cobrar!
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tabla de Resultados -->
            <div *ngIf="swbusca == 3" class="table-container">
              <div class="table-scroll-container">
                <table class="table table-hover table-modern table-sm mb-0">
                  <thead class="thead-modern sticky-header">
                    <tr>
                      <th width="50" class="text-center">#</th>
                      <th width="100" class="text-center">Cuenta</th>
                      <th class="min-width-200">Responsable de Pago</th>
                      <th width="120" class="text-center">Planilla</th>
                      <th width="150" class="text-center">Dirección</th>
                      <th width="110" class="text-center">Fecha</th>
                      <th class="min-width-150">Módulo</th>
                      <th width="130" class="text-right">Valor</th>
                      <th width="80" class="text-center">
                        <div class="custom-control custom-checkbox custom-control-sm">
                          <input type="checkbox" class="custom-control-input" id="selectAll"
                            (change)="marcarTodas($event)" [disabled]="filtrar || !deshabilitarImprimirTodo">
                          <label class="custom-control-label" for="selectAll"></label>
                        </div>
                      </th>
                      <th width="120" class="text-center">
                        <button class="btn btn-primary btn-sm mb-1" (click)="imprimirTodasEnUno()"
                          [disabled]="deshabilitarImprimirTodo" title="Imprimir todas las facturas seleccionadas">
                          <i class="fa fa-print"></i> Todas
                        </button>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let sincobro of _sincobro | filter:filtrar; let i = index"
                      [class.table-warning]="sincobro.estado == 3">
                      <td class="text-center serial-number small">{{ i+1 }}</td>
                      <td class="text-center account-number">
                        <span [ngClass]="{'text-muted': sincobro.idabonado == 0}" class="badge badge-light badge-sm">
                          {{ sincobro.idAbonado }}
                        </span>
                      </td>
                      <td class="responsible-name small">
                        <strong>{{ sincobro.responsablePago }}</strong>
                      </td>
                      <td class="text-center invoice-number">
                        <span class="badge badge-primary badge-sm">{{ sincobro.idfactura }}</span>
                      </td>
                      <td class="address-cell small">
                        {{ sincobro.direccion }}
                      </td>
                      <td class="text-center date-cell small">
                        {{ sincobro.fechaemision | date:"dd/MM/yyyy" }}
                      </td>
                      <td class="module-name small">
                        {{ sincobro.modulo }}
                      </td>
                      <td class="text-right amount-cell">
                        <span class="amount-value small">
                          ${{
                          (
                          sincobro.total +
                          sincobro.interes +
                          sincobro.iva
                          ).toFixed(2)
                          }}
                        </span>
                      </td>
                      <td class="text-center">
                        <div class="custom-control custom-checkbox custom-control-sm">
                          <input type="checkbox" class="custom-control-input" [id]="'check_' + i"
                            [(ngModel)]="sincobro.pagado" (change)="marcarAnteriores($event, i, sincobro.idAbonado)"
                            [disabled]="valCheckBox(sincobro.idAbonado, swcobrado)">
                          <label class="custom-control-label" [for]="'check_' + i"></label>
                        </div>
                      </td>
                      <td class="text-center">
                        <div class="btn-group btn-group-sm" role="group">
                          <button *ngIf="!swcobrado" class="btn btn-info btn-xs btn-icon" data-toggle="modal"
                            data-target="#DetallePlanillaModal"
                            (click)="getRubroxfac(sincobro.idfactura, sincobro.idmodulo, sincobro)"
                            title="Ver detalles">
                            <i class="fa fa-eye"></i>
                          </button>
                          <button *ngIf="swcobrado" class="btn btn-xs btn-icon" (click)="impComprobante(sincobro)"
                            [disabled]="!sincobro.pagado" [ngClass]="{
                                    'btn-danger': sincobro.procesando,
                                    'btn-success': !sincobro.procesando && sincobro.pagado
                                  }" title="Imprimir">
                            <i class="fa fa-print"></i>
                            <i *ngIf="sincobro.procesando" class="fa fa-spinner fa-spin ml-1"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                  <tfoot class="table-footer bg-light">
                    <tr>
                      <td colspan="7" class="text-right total-label small">
                        <strong>TOTAL A COBRAR</strong>
                      </td>
                      <td class="text-right total-amount">
                        <strong class="small">${{ acobrar | number: '1.2-2' }}</strong>
                      </td>
                      <td colspan="2"></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Notificación Flotante de Factura -->
<div *ngIf="_nroFactura != ''" class="floating-notification">
  <div class="notification-card">
    <div class="notification-content">
      <div class="notification-icon">
        <i class="bi bi-receipt"></i>
      </div>
      <div class="notification-text">
        <div class="notification-title">Factura Actual</div>
        <div class="notification-value">{{_nroFactura}}</div>
      </div>
    </div>
  </div>
</div>

<!-- MODALES Bootstrap 4 -->
<!-- Modal Buscar Clientes -->
<div class="modal fade" id="clientesModal" tabindex="-1" role="dialog" aria-labelledby="clientesModalLabel"
  aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white py-2">
        <h5 class="modal-title" id="clientesModalLabel">Buscar Clientes</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-9">
            <form [formGroup]="formBusClientes">
              <div class="input-group input-group-sm">
                <input type="text" placeholder="Nombre ó identificación (Mínimo 5 caracteres)"
                  class="form-control form-control-sm" autofocus id="nombre_identifica"
                  formControlName="nombre_identifica" required minlength="5" />
                <div class="input-group-append">
                  <button class="btn btn-primary btn-sm" type="button" (click)="buscarClientes()"
                    [disabled]="formBusClientes.invalid">
                    <i class="fa fa-search" aria-hidden="true"></i> Buscar
                  </button>
                </div>
              </div>
            </form>
          </div>
          <div class="col-md-3">
            <input type="text" class="form-control form-control-sm" placeholder="Filtrar..." [(ngModel)]="filtro" />
          </div>
        </div>

        <div class="row mt-3" *ngIf="!formBusClientes.invalid">
          <div class="col-12">
            <div class="table-responsive">
              <table class="table table-hover table-bordered table-sm">
                <thead class="thead-dark">
                  <tr>
                    <th width="50">#</th>
                    <th>Nombre</th>
                    <th>Identificación</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let cliente of _clientes | filter:filtro; let i= index" (click)="selecCliente(cliente)"
                    style="cursor: pointer;">
                    <td class="text-center small">{{i+1}}</td>
                    <td class="small">{{cliente.nombre}}</td>
                    <td class="small">{{cliente.cedula}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
          <i class="bi bi-x-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Cobrar -->
<div class="modal fade" id="modalCobrar" tabindex="-1" role="dialog" aria-labelledby="modalCobrarLabel"
  data-backdrop="static" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-success text-white py-2">
        <h5 class="modal-title" id="modalCobrarLabel">Proceso de Cobro</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body py-2">
        <form [formGroup]="formCobrar">
          <div class="form-group mb-2">
            <label class="font-weight-bold small">Forma de cobro</label>
            <select class="custom-select form-control-sm" formControlName="idformacobro" (change)="changeFormacobro()">
              <option *ngFor="let formacobro of _formascobro" [ngValue]="formacobro">
                {{ formacobro.descripcion }}
              </option>
            </select>
          </div>

          <div class="form-group mb-2">
            <label class="font-weight-bold small">A Cobrar</label>
            <div class="input-group input-group-sm">
              <input type="text" class="form-control text-right" formControlName="acobrar" readonly />
              <div class="input-group-append">
                <span class="input-group-text">{{ acobrardec }}</span>
              </div>
            </div>
          </div>

          <div *ngIf="formacobroNC || f['ncvalor'].value > 0" class="form-group mb-2">
            <label class="font-weight-bold small">Saldo NC</label>
            <input type="text" class="form-control form-control-sm text-center" formControlName="saldo" readonly
              [ngClass]="{
                     'is-invalid': f['saldo'].invalid && f['saldo'].touched,
                     'is-valid': f['saldo'].valid && f['saldo'].touched
                   }" />
          </div>

          <div *ngIf="formacobroNC || f['ncvalor'].value > 0" class="form-group mb-2">
            <label class="font-weight-bold small">Valor NC</label>
            <input type="text" class="form-control form-control-sm text-center" formControlName="ncvalor" [ngClass]="{
                     'is-invalid': f['ncvalor'].invalid && f['ncvalor'].touched,
                     'is-valid': f['ncvalor'].valid,
                     '': f['ncvalor'].untouched
                   }" (change)="changeNCvalor($event)" />
          </div>

          <div *ngIf="!formacobroNC" class="form-group mb-2">
            <label class="font-weight-bold small">Dinero Recibido</label>
            <div class="input-group input-group-sm">
              <input type="text" class="form-control text-center" formControlName="dinero" [ngClass]="{
                       'is-invalid': f['dinero'].invalid && f['dinero'].touched,
                       'is-valid': f['dinero'].valid,
                       '': f['dinero'].untouched
                     }" (change)="changeDinero()" />
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-success btn-xm" (click)="valorDinero()">
                  <i class="bi bi-chevron-double-down"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="form-group mb-2">
            <label class="font-weight-bold small">Vuelto</label>
            <div class="input-group input-group-sm">
              <input type="text" class="form-control text-center" formControlName="vuelto" readonly />
              <div class="input-group-append">
                <span *ngIf="disabledcobro" class="input-group-text bg-danger text-white">
                  <i class="bi bi-x-circle"></i>
                </span>
                <span *ngIf="!disabledcobro" class="input-group-text bg-success text-white">
                  <i class="fa fa-check-circle"></i>
                </span>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-success btn-sm" [disabled]="disabledcobro" (click)="cobrar()"
          data-dismiss="modal">
          <i class="fa fa-check-circle"></i> Confirmar Cobro
        </button>
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
          <i class="bi bi-x-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Detalle Planilla -->
<div class="modal fade" id="DetallePlanillaModal" tabindex="-1" role="dialog"
  aria-labelledby="DetallePlanillaModalLabel">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-info text-white py-2">
        <h5 class="modal-title" id="DetallePlanillaModalLabel">
          Detalle Planilla: {{idfactura}}
        </h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body py-2">
        <div class="text-center mb-2" *ngIf="consumo">
          <h6 class="text-muted">
            <strong>Consumo:</strong> {{ consumo }} m<sup>3</sup>
          </h6>
        </div>

        <div class="table-responsive">
          <table class="table table-sm table-bordered">
            <thead class="thead-light">
              <tr>
                <th class="small">#</th>
                <th class="small">Rubro</th>
                <th class="text-right small">Valor</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let rubroxfac of _rubrosxfac; let i=index">
                <td class="text-center small">{{i+1}}</td>
                <td class="small">{{ rubroxfac.idrubro_rubros.descripcion}}</td>
                <td class="text-right small">{{ rubroxfac.valorunitario | number:'1.2-2'}}</td>
              </tr>
              <tr *ngIf="valoriva > 0">
                <td></td>
                <td>IVA</td>
                <td class="text-right small">{{ valoriva | number:'1.2-2'}}</td>
              </tr>
              <tr *ngIf="totInteres > 0">
                <td></td>
                <td>Interés</td>
                <td class="text-right small">{{ totInteres | number:'1.2-2'}}</td>
              </tr>
              <tr class="table-active">
                <td colspan="2" class="font-weight-bold small">TOTAL</td>
                <td class="font-weight-bold text-right small">{{ totfac | number:'1.2-2'}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
          <i class="fa fa-times"></i> Cerrar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Abrir Caja -->
<div class="modal fade" id="abrirCaja" tabindex="-1" role="dialog" aria-labelledby="abrirCajaLabel"
  data-backdrop="static" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark py-2">
        <h5 class="modal-title" id="abrirCajaLabel">Abrir Caja</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body py-2">
        <div class="form-group mb-2">
          <label class="small font-weight-bold">Usuario</label>
          <input type="text" class="form-control form-control-sm" value="{{ _usuario.alias }}" readonly />
        </div>
        <div class="form-group mb-2">
          <label class="small font-weight-bold">Establecimiento</label>
          <select class="custom-select form-control-sm" (change)="changeEstablecimiento($event)"
            [(ngModel)]="_establecimiento">
            <option *ngFor="let ptoemision of _ptoemision" [ngValue]="ptoemision">
              {{ ptoemision.establecimiento }}
            </option>
          </select>
          <small class="form-text text-muted">
            {{ _establecimiento.direccion }}
          </small>
        </div>
        <div class="form-group mb-2">
          <label class="small font-weight-bold">Nro. Factura Inicial</label>
          <input type="text" class="form-control form-control-sm" value="{{ _nroFactura }}" readonly />
        </div>

        <div class="alert alert-warning text-center mt-2 py-2" *ngIf="cajaActiva">
          <i class="fa fa-exclamation-triangle"></i>
          <strong class="small">Esta caja ya está iniciada en otro computador</strong>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-warning btn-sm" [disabled]="cajaActiva" data-dismiss="modal"
          (click)="validarCaja()">
          <i class="fa fa-check-circle"></i> Iniciar Caja
        </button>
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
          <i class="bi bi-x-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Cerrar Caja -->
<div class="modal fade" id="cerrarCaja" tabindex="-1" role="dialog" aria-labelledby="cerrarCajaLabel"
  data-backdrop="static" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white py-2">
        <h5 class="modal-title" id="cerrarCajaLabel">Cerrar Caja</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body py-2">
        <div class="alert alert-warning text-center py-2">
          <i class="fa fa-exclamation-triangle mb-1"></i>
          <h6 class="small font-weight-bold">¿Está seguro de cerrar la caja?</h6>
          <p class="mb-0 small">Se registrará el total recaudado hasta el momento.</p>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal" (click)="cerrarCaja()">
          <i class="fa fa-check-circle"></i> Sí, Cerrar Caja
        </button>
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
          <i class="bi bi-x-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Imprimir -->
<div class="modal fade" id="imprimir" tabindex="-1" aria-labelledby="imprimirLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content border">
      <div class="modal-header bg-primary text-white py-2">
        <h5 class="modal-title font-weight-bold" id="ModalLabel">Imprimir</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group mb-2">
          <label class="small font-weight-bold">Opciones</label>
          <select class="custom-select form-control-sm">
            <option selected>Reimprimir planilla</option>
          </select>
        </div>
        <div class="form-group mb-2">
          <label class="small font-weight-bold">N° planilla</label>
          <input type="text" class="form-control form-control-sm" [(ngModel)]="cuenta" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal"
          (click)="reImpComprobante({ idfactura: cuenta })">
          <i class="fa fa-check-circle"></i>&nbsp; Aceptar
        </button>
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
          <i class="bi bi-x-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>
